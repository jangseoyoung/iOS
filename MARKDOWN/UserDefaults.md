## UserDefaults

- **런타임(runtime) 환경에서 동작하는 객체**
- 앱이 실행되는 동안 기본 저장소에 접근하여 데이터를 가져오고 기록하는 역할
  - 앱이 실행되지 않는 환경(ex : 플레이그라운드) 에서는 불가능
    - 컴파일 오류는 발생하지 않지만 값이 저장되지 않고 읽어들인 데이터는 모두 nil값임.
- **싱글톤 패턴으로 설계**되어 있음
  - 앱 전체에서 딱 하나의 인스턴스만 생성됨.
    - **인스턴스 하나를 앱 전체가 공유해서 사용**함.
  - 하나의 UserDefaults 객체가 모든 요청을 응답받아 처리
    - 이를 위해 UserDefaults의 객체의 메소드나 프로퍼티 대부분은 클래스 메소드나 클래스 프로퍼티로 정의되어 있음.
- 앱 전체가 하나의 자원이나 객체를 공유하여 사용할 경우 동시성(Concurrency)문제, 그중 경쟁 조건의 문제에 유의해야 함.
  - **동시성(Concurrency)문제**
    - 하나의 공유되는 자원에 여러 객체가 동시에 접근해서 사용하려고 할 때 생겨나는 문제
  - **UserDefaults는 동시성 문제로부터 안전하게 설계**되어 있음.
    - **블로킹(Blocking)**
      - 이 알고리즘 덕분에 UserDefaults객체를 안전하게 사용할 수 있음.
        - 개발 용어로 **스레드로부터 안전하도록 설계되었다(Thread - safe)**라 함.

### UserDefaults 객체를 통한 데이터 처리

- UserDefaults로 읽어들인 데이터는 옵셔널 타입으로 처리됨.
  - 데이터를 읽어 오는 과정에서 Nil값이 반환될 가능성이 있기 때문
    - nil값이 반환되는 경우
      - 입력된 키에 해당하는 데이터가 없을 때
      - 값이 nil로 저장되어 있을 때
      - 데이터를 읽어왔더라도 원하는 타입으로 캐스팅하지 못하고 실패했을 경우